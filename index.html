
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ria Movies</title>
  <meta property="og:title" content="Ria Movies">
  <meta property="og:description" content="Watch anything anywhere, anytime">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://riamovies.vercel.app"> <!-- Replace with your actual URL -->
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Ria Movies">
  <meta name="theme-color" content="#6e8efb">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ria Movies">
  <meta name="twitter:description" content="Watch anything anywhere, anytime">
  <style>
    :root {
      --primary: #6e8efb;
      --secondary: #a777e3;
      --dark-bg: #0f0f2a;
      --card-bg: rgba(30, 30, 60, 0.4);
    }
    
    * {
      box-sizing: border-box;
    }
    .section-title {
  font-size: 28px;
  margin: 60px 0 25px;
  letter-spacing: -0.5px;
}
.poster-container {
  position: relative;
  overflow: hidden;
}

.rating-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.7);
}
.fab {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 60px;
  height: 60px;
  background: linear-gradient(45deg, var(--primary), var(--secondary));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 30px rgba(110, 142, 251, 0.4);
  cursor: pointer;
  z-index: 100;
  transition: all 0.3s ease;
}

.fab:hover {
  transform: scale(1.1);
}

.section-title::after {
  height: 4px;
  width: 70px;
  bottom: -8px;
}
    .fa-star {
  color: #FFD700 !important;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
}
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0f2a 0%, #1a1a3a 50%, #2a2a5a 100%);
      color: #fff;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background-attachment: fixed;
    }
  
    .media-type {
  background: var(--primary);
  color: white;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}


    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      padding: 80px 0 60px;
      position: relative;
      z-index: 1;
    }
    
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      background: radial-gradient(circle at center, rgba(110, 142, 251, 0.2) 0%, transparent 70%);
      z-index: -1;
    }
    
    .header h1 {
      font-size: 4rem;
      margin-bottom: 20px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
      letter-spacing: -1px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .header p {
      font-size: 1.5rem;
      margin-bottom: 30px;
      opacity: 0.9;
      font-weight: 300;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
    }
    
    .search-container {
      position: relative;
      max-width: 600px;
      margin: 0 auto;
      z-index: 2;
    }
    
    .search-container input {
      width: 100%;
      padding: 18px 30px;
      font-size: 18px;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.2);
  font-weight: 500;
  letter-spacing: 0.5px;
      backdrop-filter: blur(10px);
      color: #fff;
      outline: none;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .search-container input:focus {
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 
                  0 0 0 2px rgba(110, 142, 251, 0.3);
    }
    
    .search-container input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }
    
    .search-icon {
      position: absolute;
      right: 25px;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0.6;
      font-size: 20px;
    }
    
    .clear-icon {
      position: absolute;
      right: 60px;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0.6;
      cursor: pointer;
      display: none;
      font-size: 20px;
      transition: all 0.2s ease;
    }
    
    .clear-icon:hover {
      opacity: 1;
    }
    

    

    .results-container {
      margin-top: 40px;
      position: relative;
    }
    
    .results-title {
      font-size: 24px;
      margin-bottom: 30px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 600;
      position: relative;
      display: inline-block;
    }
    
    .results-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 3px;
    }
    
    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 30px;
    }
    
    .movie-card {
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--card-bg);
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.05);
      z-index: 1;
      background: rgba(30, 30, 60, 0.5);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    }
    
    .movie-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 16px;
      background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), 
                  rgba(255, 255, 255, 0.1) 0%, 
                  transparent 70%);
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: -1;
    }
    
    .movie-card:hover::before {
      opacity: 1;
    }
    
    .movie-card::after {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 18px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      z-index: -2;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .movie-card:hover::after {
      opacity: 0.7;
    }
    
    .movie-card:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    
    .movie-poster {
      width: 100%;
      aspect-ratio: 2/3;
      object-fit: cover;
      background: linear-gradient(45deg, #2a2a4a, #3a3a6a);
      transition: transform 0.3s ease;
    }
    
    .movie-card:hover .movie-poster {
      transform: scale(1.05);
    }
    
    .movie-info {
      padding: 18px;
      position: relative;
      z-index: 1;
    }
    
    .movie-title {
      font-size: 16px;
  font-weight: 700;
  margin-bottom: 12px;
      line-height: 1.4;
      transition: color 0.3s ease;
    }
    
    .movie-card:hover .movie-title {
      color: #fff;
    }
    
    .movie-meta {
      display: flex;
      gap: 10px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.7);
    }
    
    .player-container {
      margin: 60px auto;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      background: #000;
      position: relative;
      width: 100%;
      max-width: 900px;
      aspect-ratio: 16/9;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .player-container::before {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border-radius: 20px;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      z-index: -1;
      opacity: 0.5;
      filter: blur(10px);
    }
    
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .error-message {
      text-align: center;
      padding: 100px 20px;
      font-size: 20px;
      color: rgba(255, 255, 255, 0.6);
    }
    
    /* Season & Episode Selector */
    .tv-details {
      max-width: 900px;
      margin: 0 auto 50px;
      padding: 30px;
      border-radius: 16px;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .season-tabs {
      display: flex;
      overflow-x: auto;
      gap: 10px;
      padding-bottom: 15px;
      margin-bottom: 25px;
      scrollbar-width: thin;
      scrollbar-color: var(--primary) transparent;
    }
    
    .season-tabs::-webkit-scrollbar {
      height: 6px;
    }
    
    .season-tabs::-webkit-scrollbar-thumb {
      background-color: var(--primary);
      border-radius: 3px;
    }
    
    .season-tab {
      padding: 12px 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s ease;
      flex-shrink: 0;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .season-tab:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
    .season-tab.active {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      box-shadow: 0 5px 15px rgba(110, 142, 251, 0.3);
    }
    
    .episodes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }
    
    .episode-item {
      border-radius: 12px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.1);
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .episode-item:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }
    
    .episode-item.active {
      background: rgba(110, 142, 251, 0.3);
      border: 1px solid var(--primary);
      box-shadow: 0 5px 15px rgba(110, 142, 251, 0.2);
    }
    
    .episode-number {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 8px;
    }
    
    .episode-title {
      font-size: 15px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Settings Panel */
    .settings-panel {
      max-width: 900px;
      margin: 30px auto;
      padding: 30px;
      border-radius: 16px;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .settings-title {
      font-size: 20px;
      margin-bottom: 20px;
      font-weight: 600;
      position: relative;
      display: inline-block;
    }
    
    .settings-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 3px;
    }
    
    .settings-row {
      margin-bottom: 20px;
    }
    
    .settings-row label {
      display: block;
      margin-bottom: 8px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 15px;
    }
    
    .settings-row input, .settings-row select {
      width: 100%;
      padding: 14px;
      border-radius: 8px;
      border: none;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      font-size: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }
    
    .settings-row input:focus, .settings-row select:focus {
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 0 2px rgba(110, 142, 251, 0.3);
    }
    
    /* No results state */
    .no-results {
      text-align: center;
      padding: 80px 20px;
    }
    
    .no-results-icon {
      font-size: 60px;
      margin-bottom: 30px;
      opacity: 0.6;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .no-results p {
      font-size: 18px;
      opacity: 0.8;
      max-width: 500px;
      margin: 0 auto;
      line-height: 1.6;
    }
    
    /* Floating particles background */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      filter: blur(1px);
      animation: float linear infinite;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
      }
    }
    
    
@keyframes gradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 2.5rem;
        background: linear-gradient(45deg, #6e8efb, #a777e3, #f85aad);
  background-size: 200% 200%;
  animation: gradient 8s ease infinite;
      }
      
      .header p {
        font-size: 1.2rem;
      }
      
      .results-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 20px;
      }
      
      .episodes-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      }
    }
  </style>
</head>
<body>
  <!-- Floating particles background -->
  <div class="particles" id="particles"></div>
  
  <div class="container">
    <div class="header">
      <h1>Ria Movies</h1>
     <p>Discover and stream your favorite movies and TV shows in stunning quality<br>Website by Pika<br>Discord: _.pikachu_.</p>
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search for a movie or TV show...">
        <span class="search-icon">üîç</span>
        <span class="clear-icon" id="clearSearch">‚úï</span>
      </div>
      

    
    <div class="results-container" id="resultsContainer">
      <!-- Results will be loaded here -->
    </div>
    
    <!-- TV Show Season & Episode Selector -->
    <div class="tv-details" id="tvDetails">
      <div class="season-tabs" id="seasonTabs">
        <!-- Season tabs will be loaded here -->
      </div>
      <div class="episodes-grid" id="episodesGrid">
        <!-- Episodes will be loaded here -->
      </div>
    </div>
    
    <!-- Player -->
    <div class="player-container" id="playerContainer" style="display: none;">
      <iframe id="embedFrame" src="" allowfullscreen></iframe>
    </div>
    
    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel" style="display: none;">
      <div class="settings-title">Subtitle Settings</div>
      <div class="settings-row">
        <label for="dsLang">Subtitle Language (ISO639):</label>
        <input type="text" id="dsLang" placeholder="e.g. en, de, fr">
      </div>
      <div class="settings-row">
        <label for="subUrl">Custom Subtitle URL (.srt/.vtt):</label>
        <input type="text" id="subUrl" placeholder="https://example.com/subs.vtt">
      </div>
    </div>
  </div>
  
  <script>
    
    const API_KEY = '2c2c9052e9c51c3b545c408bd5966e43'; // Replace with your TMDb API key
    let currentType = 'movie';
    let currentItem = null;
    let currentSeason = 1;
    let currentEpisode = 1;
    let searchTimeout;
    
    const searchInput = document.getElementById('searchInput');
    const resultsContainer = document.getElementById('resultsContainer');
    const playerContainer = document.getElementById('playerContainer');
    const embedFrame = document.getElementById('embedFrame');
    const clearSearch = document.getElementById('clearSearch');
    const tvDetails = document.getElementById('tvDetails');
    const seasonTabs = document.getElementById('seasonTabs');
    const episodesGrid = document.getElementById('episodesGrid');
    const settingsPanel = document.getElementById('settingsPanel');
    const toTopBtn = document.getElementById('toTopBtn');
    function showLoadingSkeleton(count = 10) {
  resultsContainer.innerHTML = `
    <div class="results-grid" id="resultsGrid"></div>
  `;
  const grid = document.getElementById('resultsGrid');
  
  for (let i = 0; i < count; i++) {
    const card = document.createElement('div');
    card.className = 'movie-card';
    card.innerHTML = `
      <div class="skeleton-poster skeleton"></div>
      <div class="movie-info">
        <div class="skeleton" style="height: 20px; width: 80%; margin-bottom: 10px; border-radius: 4px;"></div>
        <div class="skeleton" style="height: 15px; width: 60%; border-radius: 4px;"></div>
      </div>
    `;
    grid.appendChild(card);
  }
}


    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 30;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // Random size between 1px and 3px
        const size = Math.random() * 2 + 1;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // Random position
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        
        // Random animation duration between 50s and 150s
        const duration = Math.random() * 100 + 50;
        particle.style.animationDuration = `${duration}s`;
        
        // Random delay
        particle.style.animationDelay = `${Math.random() * 20}s`;
        
        particlesContainer.appendChild(particle);
      }
    }
    
    // Track mouse position for card glow effect
    function setupCardGlow() {
      const cards = document.querySelectorAll('.movie-card');
      
      cards.forEach(card => {
        card.addEventListener('mousemove', (e) => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          card.style.setProperty('--mouse-x', `${x}px`);
          card.style.setProperty('--mouse-y', `${y}px`);
        });
      });
    }
    
    // Type toggle buttons
    document.querySelectorAll('.type-toggle button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.type-toggle button').forEach(b => b.classList.remove('active'));
        button.classList.add('active');
        currentType = button.getAttribute('data-type');
        if (searchInput.value.trim()) {
          performSearch(searchInput.value.trim());
        }
      });
    });
    
    // Search input events
    searchInput.addEventListener('input', (e) => {
      const query = e.target.value.trim();
      clearSearch.style.display = query ? 'block' : 'none';
      
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        if (query) {
          performSearch(query);
        } else {
          loadDefaultContent();
        }
      }, 500);
    });
    
    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      clearSearch.style.display = 'none';
      loadDefaultContent();
    });
    
    // Perform search
    async function performSearch(query) {
  try {
    resultsContainer.innerHTML = '<div class="spinner"></div>';
    
    // Search both movies and TV shows
    const [moviesResponse, tvResponse] = await Promise.all([
      fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(query)}`),
      fetch(`https://api.themoviedb.org/3/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(query)}`)
    ]);
    
    const [moviesData, tvData] = await Promise.all([
      moviesResponse.json(),
      tvResponse.json()
    ]);
    
    // Combine results with type indicator
    const combinedResults = [
      ...(moviesData.results || []).map(item => ({ ...item, media_type: 'movie' })),
      ...(tvData.results || []).map(item => ({ ...item, media_type: 'tv' }))
    ].sort((a, b) => b.popularity - a.popularity);
    
    if (combinedResults.length > 0) {
      displayResults(combinedResults, `Search Results for "${query}"`);
    } else {
      showNoResults(query);
    }
  } catch (error) {
    showError();
  }
}

    
    // Display search results
    function displayResults(results) {
      resultsContainer.innerHTML = `
        <div class="results-title">Search Results</div>
        <div class="results-grid" id="resultsGrid"></div>
      `;
      
      const resultsGrid = document.getElementById('resultsGrid');
      
      results.forEach(item => {
        const posterPath = item.poster_path ? 
          `https://image.tmdb.org/t/p/w300${item.poster_path}` : 
          'data:image/svg+xml;charset=UTF-8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="300" viewBox="0 0 200 300"%3E%3Crect fill="%232a2a4a" width="200" height="300"/%3E%3Ctext fill="%23ffffff" font-family="Arial" font-size="16" dy=".3em" text-anchor="middle" x="100" y="150"%3ENo Image%3C/text%3E%3C/svg%3E';
        
        const year = item.release_date ? 
          new Date(item.release_date).getFullYear() : 
          (item.first_air_date ? new Date(item.first_air_date).getFullYear() : 'Unknown');
        
        const card = document.createElement('div');
        card.className = 'movie-card';
        card.innerHTML = `
  <div class="poster-container">
    <img class="movie-poster" src="${posterPath}" alt="${item.title || item.name}" loading="lazy">
    <div class="rating-badge">
      <i class="fas fa-star"></i> ${item.vote_average?.toFixed(1) || 'N/A'}
    </div>
  </div>
  <div class="movie-info">
    <div class="movie-title">${item.title || item.name}</div>
    <div class="movie-meta">
      <span class="media-type">${item.media_type === 'movie' ? 'MOVIE' : 'TV'}</span>
      <span>‚Ä¢</span>
      <span>${year}</span>
    </div>
  </div>
`;
        
        card.addEventListener('click', () => {
          selectItem(item);
        });
        
        resultsGrid.appendChild(card);
      });
      
      // Setup glow effect for the new cards
      setupCardGlow();
    }
    
    // Select an item
    async function selectItem(item) {
  currentItem = item;
  const mediaType = item.media_type || (item.first_air_date ? 'tv' : 'movie');
  
  if (mediaType === 'tv') {
    try {
      // First fetch the TV details to get available seasons
      const response = await fetch(`https://api.themoviedb.org/3/tv/${item.id}?api_key=${API_KEY}`);
      const tvDetails = await response.json();
      
      if (tvDetails.number_of_seasons > 0) {
        showTvDetails(item.id);
      } else {
        // If no seasons, try to play first episode directly
        playTvShow(item.id, 1, 1);
      }
    } catch (error) {
      console.error('Error fetching TV details:', error);
      alert('Failed to load TV show details');
    }
  } else {
    playMovie(item.id);
  }
}

async function playMovie(tmdbId) {
  playerContainer.style.display = 'block';
  tvDetails.style.display = 'none';
  settingsPanel.style.display = 'block';
  playerContainer.scrollIntoView({ behavior: 'smooth' });
  const url = `https://vidsrc.xyz/embed/movie?tmdb=${tmdbId}`;
  loadPlayer(url);
}

async function playTvShow(tmdbId, season, episode) {
  playerContainer.style.display = 'block';
  tvDetails.style.display = 'none';
  settingsPanel.style.display = 'block';
  playerContainer.scrollIntoView({ behavior: 'smooth' });
  const url = `https://vidsrc.xyz/embed/tv?tmdb=${tmdbId}&season=${season}&episode=${episode}`;
  loadPlayer(url);
}

    function displayResultsSection(results, title) {
  const section = document.createElement('div');
  section.innerHTML = `
    <div class="section-title">${title}</div>
    <div class="results-grid" id="grid-${title.replace(/\s+/g, '-').toLowerCase()}"></div>
  `;
  
  resultsContainer.appendChild(section);
  
  const grid = document.getElementById(`grid-${title.replace(/\s+/g, '-').toLowerCase()}`);
  
  results.slice(0, 10).forEach(item => {
    const posterPath = item.poster_path ? 
      `https://image.tmdb.org/t/p/w300${item.poster_path}` : 
      'data:image/svg+xml;charset=UTF-8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="300" viewBox="0 0 200 300"%3E%3Crect fill="%232a2a4a" width="200" height="300"/%3E%3Ctext fill="%23ffffff" font-family="Arial" font-size="16" dy=".3em" text-anchor="middle" x="100" y="150"%3ENo Image%3C/text%3E%3C/svg%3E';
    
    const year = item.release_date ? 
      new Date(item.release_date).getFullYear() : 
      (item.first_air_date ? new Date(item.first_air_date).getFullYear() : 'N/A');
    
    const card = document.createElement('div');
    card.className = 'movie-card';
    card.innerHTML = `
      <img class="movie-poster" src="${posterPath}" alt="${item.title || item.name}" loading="lazy">
      <div class="movie-info">
        <div class="movie-title">${item.title || item.name}</div>
        <div class="movie-meta">
          <span class="media-type">${item.media_type === 'movie' ? 'MOVIE' : 'TV'}</span>
          <span>‚Ä¢</span>
          <span>${year}</span>
          ${item.vote_average ? `<span>‚Ä¢</span><span><i class="fas fa-star" style="color: #ffd700;"></i> ${item.vote_average.toFixed(1)}</span>` : ''}
        </div>
      </div>
    `;
    
    card.addEventListener('click', () => selectItem(item));
    grid.appendChild(card);
  });
  
  setupCardGlow();
}
    
    async function loadDefaultContent() {
  try {
    resultsContainer.innerHTML = '<div class="spinner"></div>';
    
    // Fetch trending and popular content
    const [trendingMovies, trendingTV, popularMovies, popularTV] = await Promise.all([
      fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${API_KEY}`),
      fetch(`https://api.themoviedb.org/3/trending/tv/week?api_key=${API_KEY}`),
      fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}`),
      fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${API_KEY}`)
    ]);
    
    const [trendingMoviesData, trendingTVData, popularMoviesData, popularTVData] = await Promise.all([
      trendingMovies.json(),
      trendingTV.json(),
      popularMovies.json(),
      popularTV.json()
    ]);
    
    resultsContainer.innerHTML = '';
    
    // Display sections
    if (trendingMoviesData.results?.length) {
      displayResultsSection(trendingMoviesData.results.map(m => ({...m, media_type: 'movie'})), 
                       'Trending Movies');
    }
    if (trendingTVData.results?.length) {
      displayResultsSection(trendingTVData.results.map(t => ({...t, media_type: 'tv'})), 
                       'Trending TV Shows');
    }
    if (popularMoviesData.results?.length) {
      displayResultsSection(popularMoviesData.results.map(m => ({...m, media_type: 'movie'})), 
                       'Popular Movies');
    }
    if (popularTVData.results?.length) {
      displayResultsSection(popularTVData.results.map(t => ({...t, media_type: 'tv'})), 
                       'Popular TV Shows');
    }
    
  } catch (error) {
    showError();
  }
}
    // Show TV details (seasons and episodes)
    async function showTvDetails(tmdbId) {
      try {
        tvDetails.style.display = 'block';
        playerContainer.style.display = 'none';
        settingsPanel.style.display = 'none';
        
        tvDetails.scrollIntoView({ behavior: 'smooth' });
        
        // Show loading state
        seasonTabs.innerHTML = '<div class="season-tab">Loading...</div>';
        episodesGrid.innerHTML = '';
        
        const response = await fetch(`https://api.themoviedb.org/3/tv/${tmdbId}?api_key=${API_KEY}`);
        const data = await response.json();
        
        seasonTabs.innerHTML = '';
        
        // Create season tabs
        for (let i = 1; i <= data.number_of_seasons; i++) {
          const seasonTab = document.createElement('div');
          seasonTab.className = 'season-tab';
          seasonTab.textContent = `Season ${i}`;
          seasonTab.dataset.season = i;
          
          if (i === currentSeason) {
            seasonTab.classList.add('active');
          }
          
          seasonTab.addEventListener('click', () => {
            document.querySelectorAll('.season-tab').forEach(tab => tab.classList.remove('active'));
            seasonTab.classList.add('active');
            currentSeason = i;
            loadEpisodes(tmdbId, i);
          });
          
          seasonTabs.appendChild(seasonTab);
        }
        
        // Load episodes for first season
        loadEpisodes(tmdbId, currentSeason);
      } catch (error) {
        console.error(error);
        tvDetails.innerHTML = '<div class="error-message">Failed to load TV details</div>';
      }
    }
    
    
    // Load episodes for a season
    async function loadEpisodes(tmdbId, season) {
      try {
        episodesGrid.innerHTML = '<div class="episode-item">Loading episodes...</div>';
        
        const response = await fetch(`https://api.themoviedb.org/3/tv/${tmdbId}/season/${season}?api_key=${API_KEY}`);
        const data = await response.json();
        
        episodesGrid.innerHTML = '';
        
        if (data.episodes && data.episodes.length > 0) {
          data.episodes.forEach(episode => {
            const episodeItem = document.createElement('div');
            episodeItem.className = 'episode-item';
            episodeItem.innerHTML = `
              <div class="episode-number">Episode ${episode.episode_number}</div>
              <div class="episode-title">${episode.name}</div>
            `;
            
            episodeItem.addEventListener('click', () => {
              document.querySelectorAll('.episode-item').forEach(item => item.classList.remove('active'));
              episodeItem.classList.add('active');
              currentEpisode = episode.episode_number;
              
              // Load the episode
              playerContainer.style.display = 'block';
              settingsPanel.style.display = 'block';
              playerContainer.scrollIntoView({ behavior: 'smooth' });
              
              const url = `https://vidsrc.xyz/embed/tv?tmdb=${tmdbId}&season=${season}&episode=${episode.episode_number}`;
              loadPlayer(url);
            });
            
            episodesGrid.appendChild(episodeItem);
          });
        } else {
          episodesGrid.innerHTML = '<div class="episode-item">No episodes found</div>';
        }
      } catch (error) {
        console.error(error);
        episodesGrid.innerHTML = '<div class="episode-item">Failed to load episodes</div>';
      }
    }
    
    // Load player with subtitles if available
    function loadPlayer(baseUrl) {
      const dsLang = document.getElementById('dsLang').value.trim();
      const subUrl = document.getElementById('subUrl').value.trim();
      
      let url = baseUrl;
      
      const params = [];
      if (dsLang) params.push(`ds_lang=${dsLang}`);
      if (subUrl) params.push(`sub_url=${encodeURIComponent(subUrl)}`);
      
      if (params.length) {
        url += '&' + params.join('&');
      }
      
      embedFrame.src = url;
    }
    
    // Show placeholder content when no search
    function showPlaceholder() {
      resultsContainer.innerHTML = `
        <div class="no-results">
          <div class="no-results-icon">üé¨</div>
          <p>Search for your favorite movies and TV shows</p>
        </div>
      `;
      playerContainer.style.display = 'none';
      tvDetails.style.display = 'none';
      settingsPanel.style.display = 'none';
    }
    
    // Initialize the page
// Replace your current initialization with:
createParticles();
showLoadingSkeleton();
loadDefaultContent();
// Make sure to call loadDefaultContent() when clearing search too
clearSearch.addEventListener('click', () => {
  searchInput.value = '';
  clearSearch.style.display = 'none';
  loadDefaultContent();
});
  </script>
  <div class="fab" id="toTopBtn">
    <i class="fas fa-arrow-up" style="color: white; font-size: 20px;"></i>
  </div>
</body>
</html>
